<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
    
  
  <link href="//img.carlwe.com/jquery.fancybox.min.css" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/logo.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.6.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="‰ªäÂ§©Êàë‰ª¨Êù•ËÅä‰∏ÄËÅäAndroid ÂÜÖÂ≠ò‰ºòÂåñÔºåËøôÁØáÊñáÁ´†Êú¨Êù•ÂæàÊó©Â∞±Â∫îËØ•ÂÜô‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Â∞èÊ∏∏ÊàèÂºÄÂèëÂ§™Âê∏Âºï‰∫∫‰∫ÜÔºåÊâÄ‰ª•Ëøô‰∏™Â∞±ÊãñÂà∞‰∫ÜÁé∞Âú®ÊâçÂºÄÂßãÔºå‰∏çËøáÊàëËßâÂæó‰πü‰∏çÊôöüòÅ">
<meta name="keywords" content="ÊäÄÊúØ">
<meta property="og:type" content="article">
<meta property="og:title" content="ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ">
<meta property="og:url" content="http://carlwe.com/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/index.html">
<meta property="og:site_name" content="CarlWe">
<meta property="og:description" content="‰ªäÂ§©Êàë‰ª¨Êù•ËÅä‰∏ÄËÅäAndroid ÂÜÖÂ≠ò‰ºòÂåñÔºåËøôÁØáÊñáÁ´†Êú¨Êù•ÂæàÊó©Â∞±Â∫îËØ•ÂÜô‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Â∞èÊ∏∏ÊàèÂºÄÂèëÂ§™Âê∏Âºï‰∫∫‰∫ÜÔºåÊâÄ‰ª•Ëøô‰∏™Â∞±ÊãñÂà∞‰∫ÜÁé∞Âú®ÊâçÂºÄÂßãÔºå‰∏çËøáÊàëËßâÂæó‰πü‰∏çÊôöüòÅ">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://img.carlwe.com/android_memory_logo.png-h">
<meta property="og:image" content="https://img.carlwe.com/process_priority.jpg">
<meta property="og:image" content="https://img.carlwe.com/dalvik_art_gc.jpeg">
<meta property="og:image" content="https://img.carlwe.com/dalvik_gc.jpg">
<meta property="og:image" content="https://img.carlwe.com/art_gc.jpg">
<meta property="og:image" content="https://img.carlwe.com/linux_kernel.jpg">
<meta property="og:image" content="https://img.carlwe.com/memory_problem.jpg">
<meta property="og:image" content="https://img.carlwe.com/reduce_running_memory.jpg">
<meta property="og:image" content="https://img.carlwe.com/code_optimize.jpg">
<meta property="og:image" content="https://img.carlwe.com/memory_leak_optimize.jpg">
<meta property="og:image" content="https://img.carlwe.com/memory_is_enough.jpg">
<meta property="og:image" content="https://img.carlwe.com/gc_type.jpg">
<meta property="og:image" content="https://img.carlwe.com/gc_log.jpg">
<meta property="og:image" content="https://img.carlwe.com/adb_dumpsys.jpg">
<meta property="og:image" content="https://img.carlwe.com/use_profiler.jpg">
<meta property="og:image" content="https://img.carlwe.com/leakcanary_logo.png">
<meta property="og:updated_time" content="2020-08-18T02:25:58.812Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ">
<meta name="twitter:description" content="‰ªäÂ§©Êàë‰ª¨Êù•ËÅä‰∏ÄËÅäAndroid ÂÜÖÂ≠ò‰ºòÂåñÔºåËøôÁØáÊñáÁ´†Êú¨Êù•ÂæàÊó©Â∞±Â∫îËØ•ÂÜô‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Â∞èÊ∏∏ÊàèÂºÄÂèëÂ§™Âê∏Âºï‰∫∫‰∫ÜÔºåÊâÄ‰ª•Ëøô‰∏™Â∞±ÊãñÂà∞‰∫ÜÁé∞Âú®ÊâçÂºÄÂßãÔºå‰∏çËøáÊàëËßâÂæó‰πü‰∏çÊôöüòÅ">
<meta name="twitter:image" content="https://img.carlwe.com/android_memory_logo.png-h">






  <link rel="canonical" href="http://carlwe.com/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ | CarlWe</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CarlWe</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="ÂàáÊç¢ÂØºËà™Ê†è">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>È¶ñÈ°µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Ê†áÁ≠æ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>ÂΩíÊ°£</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://carlwe.com/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CarlWe">
      <meta itemprop="description" content="Think Different">
      <meta itemprop="image" content="https://img.carlwe.com/blog_head.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CarlWe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              

              
                
              

              <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2019-01-11 16:39:04" itemprop="dateCreated datePublished" datetime="2019-01-11T16:39:04+08:00">2019-01-11</time>
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">ËØÑËÆ∫Êï∞Ôºö</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/01/11/ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ/" class="leancloud_visitors" data-flag-title="ÊµÖË∞àAndroidÂÜÖÂ≠ò‰ºòÂåñ">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">ÈòÖËØªÊ¨°Êï∞Ôºö</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="https://img.carlwe.com/android_memory_logo.png-h" alt=""></p>
<p>‰ªäÂ§©Êàë‰ª¨Êù•ËÅä‰∏ÄËÅäAndroid ÂÜÖÂ≠ò‰ºòÂåñÔºåËøôÁØáÊñáÁ´†Êú¨Êù•ÂæàÊó©Â∞±Â∫îËØ•ÂÜô‰∫ÜÔºå‰ΩÜÂõ†‰∏∫Â∞èÊ∏∏ÊàèÂºÄÂèëÂ§™Âê∏Âºï‰∫∫‰∫ÜÔºåÊâÄ‰ª•Ëøô‰∏™Â∞±ÊãñÂà∞‰∫ÜÁé∞Âú®ÊâçÂºÄÂßãÔºå‰∏çËøáÊàëËßâÂæó‰πü‰∏çÊôöüòÅ<br><a id="more"></a></p>
<blockquote>
<p>ËøôÁØáÊñáÁ´†‰∏ªË¶ÅÈÄöËøáÂ¶Ç‰∏ã‰∏â‰∏™ÊñπÈù¢ÂØπAndroidÂÜÖÂ≠ò‰ºòÂåñËøõË°å‰ªãÁªçÔºö</p>
<ol>
<li>AndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂</li>
<li>AndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï</li>
<li>AndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß</li>
</ol>
</blockquote>
<p>ÊñáÁ´†‰∏ç‰ºöÊ∂âÂèäÂà∞nativeÂÜÖÂ≠òÁöÑ‰ºòÂåñÔºåÂõ†‰∏∫ÊôÆÈÄöAppÂºÄÂèë‰∏≠Ê∂âÂèäÁöÑËæÉÂ∞ëÔºåÂ¶ÇÊûúÊÉ≥‰∫ÜËß£ÂèØ‰ª•ÂèÇËÄÉ<a href="https://time.geekbang.org/column/article/71277" target="_blank" rel="noopener">ÊûÅÂÆ¢Êó∂Èó¥</a>Âº†ÁªçÊñáËÄÅÂ∏àÁöÑAndroidÂºÄÂèëÈ´òÊâãËØæ„ÄÇ</p>
<h2 id="‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂"><a href="#‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂" class="headerlink" title="‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂"></a>‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂</h2><p>ÊÉ≥Ë¶Å‰ºòÂåñAndroidÂÜÖÂ≠òÔºå‰∏Ä‰∫õÂøÖÂ§áÁöÑÂü∫Á°ÄÁü•ËØÜÊòØ‰∏çËÉΩÂ∞ëÁöÑ„ÄÇÊâÄ‰ª•Âú®Á¨¨‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨ÂÖà‰ªéApplication Framework„ÄÅDalvik/Art„ÄÅLinuxÂÜÖÊ†∏‰∏â‰∏™ÈÉ®ÂàÜÁî±ÊµÖÂÖ•Ê∑±Êù•ËÆ≤Ëß£ÂÖ≥‰∫éAndrodÂÜÖÂ≠òÁõ∏ÂÖ≥ÁöÑÁü•ËØÜ„ÄÇ</p>
<h3 id="Application-Framework"><a href="#Application-Framework" class="headerlink" title="Application Framework"></a>Application Framework</h3><p>È¶ñÂÖàÊù•Áúã‰∏ãËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÔºö</p>
<p><img src="https://img.carlwe.com/process_priority.jpg" alt=""></p>
<p><code>ÂâçÂè∞ËøõÁ®ã</code>ÔºöÁî®Êà∑ÂΩìÂâçÊìç‰ΩúÊâÄÂøÖÈúÄÁöÑËøõÁ®ã„ÄÇ</p>
<p><code>ÂèØËßÅËøõÁ®ã</code>ÔºöÊ≤°Êúâ‰ªª‰ΩïÂâçÂè∞ÁªÑ‰ª∂„ÄÅ‰ΩÜ‰ªç‰ºöÂΩ±ÂìçÁî®Êà∑Âú®Â±èÂπï‰∏äÊâÄËßÅÂÜÖÂÆπÁöÑËøõÁ®ã„ÄÇ</p>
<p><code>ÊúçÂä°ËøõÁ®ã</code>ÔºöÊ≠£Âú®ËøêË°åÂ∑≤‰ΩøÁî® startService() ÊñπÊ≥ïÂêØÂä®ÁöÑÊúçÂä°„ÄÇÔºàÂêéÂè∞Êí≠ÊîæÈü≥‰πêÔºåÁΩëÁªú‰∏ãËΩΩÊï∞ÊçÆÔºâ</p>
<p><code>ÂêéÂè∞ËøõÁ®ã</code>ÔºöÂØπÁî®Êà∑‰∏çÂèØËßÅÁöÑ Activity ÁöÑËøõÁ®ãÔºàÂ∑≤Ë∞ÉÁî® Activity ÁöÑ onStop() ÊñπÊ≥ïÔºâ</p>
<p><code>Á©∫ËøõÁ®ã</code>Ôºö‰∏çÂê´‰ªª‰ΩïÊ¥ªÂä®Â∫îÁî®ÁªÑ‰ª∂ÁöÑËøõÁ®ã„ÄÇ‰øùÁïôËøôÁßçËøõÁ®ãÁöÑÁöÑÂîØ‰∏ÄÁõÆÁöÑÊòØÁî®‰ΩúÁºìÂ≠òÔºå‰ª•Áº©Áü≠‰∏ãÊ¨°Âú®ÂÖ∂‰∏≠ËøêË°åÁªÑ‰ª∂ÊâÄÈúÄÁöÑÂêØÂä®Êó∂Èó¥</p>
<p><code>ËøõÁ®ãÁîüÂëΩÂë®Êúü</code>ÔºöAndroid Á≥ªÁªüÂ∞ÜÂ∞ΩÈáèÈïøÊó∂Èó¥Âú∞‰øùÊåÅÂ∫îÁî®ËøõÁ®ãÔºå‰ΩÜ‰∏∫‰∫ÜÊñ∞Âª∫ËøõÁ®ãÊàñËøêË°åÊõ¥ÈáçË¶ÅÁöÑËøõÁ®ãÔºåÊúÄÁªàÈúÄË¶ÅÁßªÈô§ÊóßËøõÁ®ãÊù•ÂõûÊî∂ÂÜÖÂ≠ò„ÄÇ ‰∏∫‰∫ÜÁ°ÆÂÆö‰øùÁïôÊàñÁªàÊ≠¢Âì™‰∫õËøõÁ®ãÔºåÁ≥ªÁªü‰ºöÊ†πÊçÆËøõÁ®ã‰∏≠Ê≠£Âú®ËøêË°åÁöÑÁªÑ‰ª∂‰ª•ÂèäËøô‰∫õÁªÑ‰ª∂ÁöÑÁä∂ÊÄÅÔºåÂ∞ÜÊØè‰∏™ËøõÁ®ãÊîæÂÖ•‚ÄúÈáçË¶ÅÊÄßÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠„ÄÇ ÂøÖË¶ÅÊó∂ÔºåÁ≥ªÁªü‰ºöÈ¶ñÂÖàÊ∂àÈô§ÈáçË¶ÅÊÄßÊúÄ‰ΩéÁöÑËøõÁ®ãÔºåÁÑ∂ÂêéÊòØÈáçË¶ÅÊÄßÁï•È´òÁöÑËøõÁ®ãÔºåÊù•ÂõûÊî∂Á≥ªÁªüËµÑÊ∫ê„ÄÇÔºà‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂâçÂè∞ËøõÁ®ãÂ∞±ÊòØ‰∏éÁî®Êà∑‰∫§‰∫íÁöÑËøõÁ®ã‰∫Ü,Â¶ÇÊûúËøûÂâçÂè∞ËøõÁ®ãÈÉΩÈúÄË¶ÅÂõûÊî∂ÈÇ£‰πàÊ≠§Êó∂Á≥ªÁªüÂá†‰πé‰∏çÂèØÁî®‰∫ÜÔºâ„ÄÇÁî±Ê≠§‰πüË°çÁîü‰∫ÜÂæàÂ§öËøõÁ®ã‰øùÊ¥ªÁöÑÊñπÊ≥ïÔºàÊèêÈ´ò‰ºòÂÖàÁ∫ßÔºå‰∫íÁõ∏Âî§ÈÜíÔºånative‰øùÊ¥ªÁ≠âÁ≠âÔºâÔºåÂá∫Áé∞ÂêÑÁßçÊùÄ‰∏çÊ≠ªÁöÑËøõÁ®ãÁöÑAPP„ÄÇ</p>
<p><code>ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅì</code>ÔºöAndroid‰∏≠Áî±ActivityManagerService Á±ªÈõÜ‰∏≠ÁÆ°ÁêÜÊâÄÊúâËøõÁ®ãÁöÑÂÜÖÂ≠òËµÑÊ∫êÂàÜÈÖçÔºåÊàë‰ª¨ÂèØ‰ª•Êü•ÁúãÂÖ∂Ê∫êÁ†ÅÊù•ÂÖ∑‰ΩìÂàÜÊûêÂÆûÁé∞ËøáÁ®ã„ÄÇ</p>
<h3 id="Dalvik-Art-ËôöÊãüÊú∫"><a href="#Dalvik-Art-ËôöÊãüÊú∫" class="headerlink" title="Dalvik/Art ËôöÊãüÊú∫"></a>Dalvik/Art ËôöÊãüÊú∫</h3><h4 id="Android-Dalvik-Heap"><a href="#Android-Dalvik-Heap" class="headerlink" title="Android Dalvik Heap"></a>Android Dalvik Heap</h4><p><img src="https://img.carlwe.com/dalvik_art_gc.jpeg" alt=""></p>
<p><code>ÁÆÄ‰ªã</code>ÔºöAndroid Dalvik Heap‰∏éÂéüÁîüJava‰∏ÄÊ†∑ÔºåÂ∞ÜÂ†ÜÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÂàÜ‰∏∫‰∏â‰∏™Âå∫ÂüüÔºåYoung GenerationÊñ∞Áîü‰ª£ÔºåOld GenerationÂπ¥ËÄÅ‰ª£Ôºå Permanent GenerationÊåÅ‰πÖ‰ª£„ÄÇ</p>
<p><code>ÂØπË±°ÂàÜÈÖçËøáÁ®ã</code>ÔºöÊúÄËøëÂàÜÈÖçÁöÑÂØπË±°‰ºöÂ≠òÊîæÂú®Êñ∞Áîü‰ª£Âå∫ÂüüÔºåÊñ∞Áîü‰ª£Âå∫ÂüüÂàÜ‰∏∫edenÂå∫Ôºà‰ºäÁî∏Âõ≠ÔºåÂú£Áªè‰∏≠Êåá‰∏äÂ∏ù‰∏∫‰∫öÂΩìÂ§èÂ®ÉÂàõÈÄ†ÁöÑÁîüÊ¥ª‰πêÂõ≠Ôºâ„ÄÅsoÂå∫Âíås1Âå∫Ôºås1Âíås0Âå∫‰πüË¢´Áß∞‰∏∫fromÂå∫ÂíåtoÂå∫ÔºàÂêàÁß∞SurvivorÂå∫ÔºâÔºå‰ªñ‰ª¨ÊòØ‰∏§ÂùóÂ§ßÂ∞èÁõ∏Á≠âÂπ∂‰∏îÂèØ‰ª•‰∫íÊç¢ËßíËâ≤ÁöÑÁ©∫Èó¥ÔºåÁªùÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ã,ÂØπË±°È¶ñÂÖàÂàÜÈÖçÂú®edenÂå∫ÔºåÂú®‰∏ÄÊ¨°Êñ∞Áîü‰ª£ÂõûÊî∂ÂêéÔºåÂ¶ÇÊûúÂØπË±°ËøòÂ≠òÊ¥ª‰ºöËøõÂÖ•s0ÊàñËÄÖs1Âå∫Ôºå‰πãÂêéÊØè‰∏ÄÊ¨°gcÔºåÂ≠òÊ¥ªÁöÑÂØπË±°Âπ¥ÈæÑÈÉΩ‰ºöÁõ∏Â∫îÂ¢ûÂä†ÔºåÂΩìËææÂà∞‰∏ÄÂÆöÂπ¥ÈæÑÂàô‰ºöËøõÂÖ•ËÄÅÂπ¥‰ª£ÔºåÊúÄÂêéÁ¥ØÁßØ‰∏ÄÂÆöÊó∂Èó¥ÂÜçÁßªÂä®Âà∞ÊåÅ‰πÖ‰ª£Âå∫Âüü„ÄÇÁ≥ªÁªü‰ºöÊ†πÊçÆÂÜÖÂ≠ò‰∏≠‰∏çÂêåÁöÑÂÜÖÂ≠òÊï∞ÊçÆÁ±ªÂûãÂàÜÂà´ÊâßË°å‰∏çÂêåÁöÑgcÊìç‰Ωú„ÄÇ</p>
<p><code>ÈóÆÈ¢ò</code>ÔºöGCÂèëÁîüÁöÑÊó∂ÂÄôÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÊòØ‰ºöË¢´ÊöÇÂÅúÁöÑ„ÄÇÊâßË°åGCÊâÄÂç†Áî®ÁöÑÊó∂Èó¥ÂíåÂÆÉÂèëÁîüÂú®Âì™‰∏Ä‰∏™Generation‰πüÊúâÂÖ≥Á≥ªÔºåÊñ∞Áîü‰ª£‰∏≠ÁöÑÊØèÊ¨°GCÊìç‰ΩúÊó∂Èó¥ÊòØÊúÄÁü≠ÁöÑÔºåÂπ¥ËÄÅ‰ª£ÂÖ∂Ê¨°ÔºåÊåÅ‰πÖ‰ª£ÊúÄÈïø„ÄÇGCÊó∂‰ºöÂØºËá¥Á∫øÁ®ãÊöÇÂÅú„ÄÅÁïåÈù¢Âç°È°øÁöÑÈóÆÈ¢òÂú®Android Art‰∏≠ÂæóÂà∞‰∫Ü‰ºòÂåñ„ÄÇ</p>
<h4 id="DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè"><a href="#DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè" class="headerlink" title="DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè"></a>DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè</h4><p><img src="https://img.carlwe.com/dalvik_gc.jpg" alt=""></p>
<p><code>DalvikÂûÉÂúæÂõûÊî∂ËøáÁ®ã</code>ÔºöGC‰ºöÂéªÊ†áËÆ∞ÂíåÊü•ÊâæÊâÄÊúâÂèØËÆøÈóÆÂà∞ÁöÑÊ¥ªÂä®ÂØπË±°ÔºåËøô‰∏™Êó∂ÂÄôÊï¥‰∏™Á®ãÂ∫èÁöÑÁ∫øÁ®ãÂ∞±‰ºöÊåÇËµ∑ÔºåÂπ∂‰∏îËôöÊãüÊú∫ÂÜÖÈÉ®ÁöÑÊâÄÊúâÁ∫øÁ®ã‰πü‰ºöÂêåÊó∂ÊåÇËµ∑(Â∑¶‰∏ãÂõæ) „ÄÇ‰πãÊâÄ‰ª•Ë¶ÅÊåÇËµ∑ÊâÄÊúâÁ∫øÁ®ãÊòØÁ°Æ‰øùÔºöÊâÄÊúâÁ®ãÂ∫èÊ≤°ÊúâËøõË°å‰ªª‰ΩïÂèòÊõ¥Ôºå‰∏éÊ≠§ÂêåÊó∂GC‰ºöÈöêËóèÊâÄÊúâÂ§ÑÁêÜËøáÁöÑÂØπË±°ÔºåÊúÄÁªàÁ°Æ‰øùÊ†áËÆ∞‰∫ÜÊâÄÊúâÈúÄË¶ÅÂõûÊî∂ÁöÑÂØπË±°ÂêéÔºåGCÊâç‰ºöÊÅ¢Â§çÊâÄÊúâÁ∫øÁ®ãÔºåÂπ∂ÈáäÊîæÁ©∫Èó¥„ÄÇ</p>
<p><code>Â§ßÂÜÖÂ≠òÂØπË±°ÂàÜÈÖç</code>ÔºöÂΩìÂèëÁé∞ÈúÄË¶ÅÁªô‰∏Ä‰∏™ËæÉÂ§ßÁöÑÂØπË±°(ËìùËâ≤ÊñπÂùó)ÂàÜÈÖçÁ©∫Èó¥Êó∂ÔºåÂèëÁé∞ÂèØÁî®Á©∫Èó¥ËøòÊòØÂ§üÁöÑÔºå‰ΩÜÊ≤°ÊúâËøô‰πàÂ§ßÁöÑËøûÁª≠Á©∫Èó¥‰æõÊñ∞ÂØπË±°‰ΩøÁî®ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±‰∏çÂæó‰∏çËøõË°å‰∏ÄÊ¨°GCÂõûÊî∂ÔºàÁ∫¢Ëâ≤ÊñπÂùóÔºåÂè≥‰∏ãÂõæÔºâÔºå‰∏∫Â§ßÂØπË±°ËÖæÂá∫ËæÉÂ§ßÂπ∂‰∏îËøûÁª≠ÁöÑÁ©∫Èó¥„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨Âú®ÂàÜÈÖç‰∏Ä‰∏™ËæÉÂ§ßÂØπË±°ÁöÑÊó∂ÂÄôÈùûÂ∏∏ÂÆπÊòìÂºïËµ∑‰∏¢Â∏ßÂíåÂç°È°øÁöÑÂéüÂõ†‰πã‰∏ÄÔºåÊâÄ‰ª•Android5.0‰ª•ÂâçÂ§ßÂÆ∂ÈÉΩËÆ§‰∏∫AndroidÂç°È°øÊòØÂõ†‰∏∫DarvikËôöÊãüÊú∫ÁöÑÊïàÁéá‰Ωé‰∏ãÂØºËá¥ÁöÑ„ÄÇ</p>
<p><code>ÊÄªÁªì</code>ÔºöDalvikËôöÊãüÊú∫ÁöÑ‰∏â‰∏™ÈóÆÈ¢ò</p>
<ol>
<li>GCÊó∂ÊåÇËµ∑ÊâÄÊúâÁ∫øÁ®ã </li>
<li>Â§ßËÄåËøûÁª≠ÁöÑÁ©∫Èó¥Á¥ßÂº† </li>
<li>ÂÜÖÂ≠òÁ¢éÁâáÂåñ‰∏•Èáç</li>
</ol>
<h4 id="ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ"><a href="#ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ" class="headerlink" title="ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ"></a>ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ</h4><p><img src="https://img.carlwe.com/art_gc.jpg" alt=""></p>
<p><code>GCËøáÁ®ã</code>ÔºöÂú®ART‰∏≠GC‰ºöË¶ÅÊ±ÇÁ®ãÂ∫èÂú®ÂàÜÈÖçÁ©∫Èó¥ÁöÑÊó∂ÂÄôÊ†áËÆ∞Ëá™Ë∫´ÁöÑÂ†ÜÊ†àÔºåËøô‰∏™ËøáÁ®ãÈùûÂ∏∏Áü≠Ôºå‰∏çÈúÄË¶ÅÊåÇËµ∑ÊâÄÊúâÁ®ãÂ∫èÁöÑÁ∫øÁ®ã.ËøôÊ†∑Â∞±ËäÇÁ∫¶‰∫ÜÂæàÂ§ß‰∏ÄÈÉ®ÂàÜÊó∂Èó¥ÂéªÊü•ÊâæÊ¥ªÂä®ÂØπË±°„ÄÇ</p>
<p><code>Â§ßÂÜÖÂ≠òÂØπË±°ÂàÜÈÖç</code>ÔºöARTÈáå‰ºöÊúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑLOS‰æõBitmap‰ΩøÁî®Ôºå‰ªéËÄåÊèêÈ´ò‰∫ÜGCÁöÑÁÆ°ÁêÜÊïàÁéáÂíåÊï¥‰ΩìÊÄßËÉΩ.</p>
<p><code>ÂÜÖÂ≠òÁ¢éÁâáÂåñ</code>Âú®ARTÈáåËøò‰ºöÊúâ‰∏Ä‰∏™moving collectorÊù•ÂéãÁº©Ê¥ªÂä®ÂØπË±°(ÁªøËâ≤ÊñπÂùó)Ôºå‰ΩøÂæóÂÜÖÂ≠òÁ©∫Èó¥Êõ¥Âä†Á¥ßÂáë„ÄÇ</p>
<p><code>ÊÄªÁªì</code> ÔºöGoogleÂú®ARTÈáåÂØπGCÂÅö‰∫ÜÈùûÂ∏∏Â§ßÁöÑ‰ºòÂåñ(Êõ¥È´òÊïàÁöÑÂõûÊî∂ÁÆóÊ≥ï),‰ΩøARTÂÜÖÂ≠òÂàÜÈÖçÁöÑÊïàÁéáÊèêÈ´ò‰∫Ü10ÂÄçÔºåGCÁöÑÊïàÁéáÊèêÈ´ò‰∫Ü2-3ÂÄçÔºàÂèØËßÅÂéüÊù•ÊïàÁéáÊúâÂ§ö‰ΩéÔºâÔºå‰∏çËøá‰∏ªË¶ÅËøòÊòØ‰ºòÂåñ‰∏≠Êñ≠ÂíåÈòªÂ°ûÁöÑÊó∂Èó¥ÔºåÈ¢ëÁπÅÁöÑGCËøòÊòØ‰ºöÂØºËá¥Âç°È°ø„ÄÇ</p>
<h3 id="LinuxÂÜÖÊ†∏"><a href="#LinuxÂÜÖÊ†∏" class="headerlink" title="LinuxÂÜÖÊ†∏"></a>LinuxÂÜÖÊ†∏</h3><p><img src="https://img.carlwe.com/linux_kernel.jpg" alt=""></p>
<p><code>Lowmemorykiller</code>ÔºöActivityManagerService‰∏≠trimApplications() ÂáΩÊï∞‰∏≠‰ºöÊâßË°å‰∏Ä‰∏™Âè´ÂÅö updateOomAdjLocked() ÁöÑÂáΩÊï∞ÔºåupdateOomAdjLocked Â∞ÜÈíàÂØπÊØè‰∏Ä‰∏™ËøõÁ®ãÊõ¥Êñ∞‰∏Ä‰∏™Âêç‰∏∫ adj ÁöÑÂèòÈáèÔºåÔºàÁî®Êù•Ë°®Á§∫ÂèëÁîüÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÊùÄÊ≠ªËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºâÂπ∂Â∞ÜÂÖ∂ÂëäÁü• Linux ÂÜÖÊ†∏ÔºåÂÜÖÊ†∏ÂêåÊ†∑Áª¥Êä§‰∏Ä‰∏™ÂåÖÂê´ adj ÁöÑÊï∞ÊçÆÁªìÊûÑÔºàÂç≥ËøõÁ®ãË°®ÔºâÔºåÂπ∂ÈÄöËøá lowmemorykiller Ê£ÄÊü•Á≥ªÁªüÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂú®ÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÈÅçÂéÜÊâÄÊúâËøõÁ®ãÔºåÈÄâÂá∫‰Ωé‰ºòÂÖàÁ∫ßÁöÑËøõÁ®ãÊùÄÊ≠ªÔºåÊúÄÁªàÁî±ÂÜÖÊ†∏ÂéªÂÆåÊàêÁúüÊ≠£ÁöÑÂÜÖÂ≠òÂõûÊî∂„ÄÇ</p>
<p><code>Oom_killer</code> ÔºöÂ¶ÇÊûú‰∏äËø∞ÂêÑÁßçÊñπÊ≥ïÈÉΩÊó†Ê≥ïÈáäÊîæÂá∫Ë∂≥Â§üÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÈÇ£‰πàÂΩì‰∏∫Êñ∞ÁöÑËøõÁ®ãÂàÜÈÖçÂÜÖÂ≠òÊó∂Â∞ÜÂèëÁîü Out of Memory ÂºÇÂ∏∏ÔºåOOM_killer Â∞ÜÂ∞ΩÊúÄÂêéÁöÑÂä™ÂäõÊùÄÊéâ‰∏Ä‰∫õËøõÁ®ãÊù•ÈáäÊîæÁ©∫Èó¥„ÄÇAndroid ‰∏≠ÁöÑoom_killerÂêåÊ†∑‰ºöÈÅçÂéÜËøõÁ®ãÔºåÂπ∂ËÆ°ÁÆóÊâÄÊúâËøõÁ®ãÁöÑ badness ÂÄºÔºåÈÄâÊã© badness ÊúÄÂ§ßÁöÑÈÇ£‰∏™ËøõÁ®ãÂ∞ÜÂÖ∂ÊùÄÊéâ„ÄÇ</p>
<p><code>OomÁöÑÊù°‰ª∂</code>ÔºöÂè™Ë¶Åallocated + Êñ∞ÂàÜÈÖçÁöÑÂÜÖÂ≠ò &gt;= dalvik heap(Â†ÜÂÜÖÂ≠ò) ÊúÄÂ§ßÂÄºÁöÑÊó∂ÂÄôÂ∞±‰ºöÂèëÁîüOOMÔºàArtËøêË°åÁéØÂ¢ÉÁöÑÁªüËÆ°ËßÑÂàôËøòÊòØÂíådalvik‰øùÊåÅ‰∏ÄËá¥Ôºâ</p>
<h3 id="ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü"><a href="#ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü" class="headerlink" title="ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü"></a>ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü</h3><p><img src="https://img.carlwe.com/memory_problem.jpg" alt=""></p>
<p>‰∏äÈù¢‰ªãÁªç‰∫ÜAndroidÂÜÖÂ≠òÂàÜÈÖç‰ªéÂ∫îÁî®Â±ÇÂà∞LinuxÂ±ÇÁöÑ‰∏Ä‰∫õÁü•ËØÜÔºåÊâÄ‰ª•ÊàëÊÄªÁªìÂá∫‰∏äÂõæÂÜÖÂ≠ò‰ºöÂØºËá¥ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºå‰ΩÜÊòØ‰∏äÂõæÂè™ÊòØÂàóÂá∫‰∫Ü‰∏Ä‰∫õÂ∏∏ËßÅÊÉÖÂÜµÔºåÂâçÂêéÂπ∂Ê≤°ÊúâÁªùÂØπÁöÑÂõ†ÊûúÂÖ≥Á≥ªÔºåÊúÄÂêéÊù•ËØ¥‰∏ãÂÜÖÂ≠òÊäñÂä®„ÄÇ</p>
<p><code>ÂÜÖÂ≠òÊäñÂä®</code>ÔºöMemory ChurnÔºåÂÜÖÂ≠òÊäñÂä®ÊòØÂõ†‰∏∫Âú®Áü≠Êó∂Èó¥ÂÜÖÂ§ßÈáèÁöÑÂØπË±°Ë¢´ÂàõÂª∫ÂèàÈ©¨‰∏äË¢´ÈáäÊîæ„ÄÇÁû¨Èó¥‰∫ßÁîüÂ§ßÈáèÁöÑÂØπË±°‰ºö‰∏•ÈáçÂç†Áî®ÂÜÖÂ≠òÂå∫ÂüüÔºåÂΩìËææÂà∞ÈòÄÂÄºÔºåÂâ©‰ΩôÁ©∫Èó¥‰∏çÂ§üÁöÑÊó∂ÂÄôÔºå‰ºöËß¶ÂèëGC‰ªéËÄåÂØºËá¥Âàö‰∫ßÁîüÁöÑÂØπË±°ÂèàÂæàÂø´Ë¢´ÂõûÊî∂„ÄÇÂç≥‰ΩøÊØèÊ¨°ÂàÜÈÖçÁöÑÂØπË±°Âç†Áî®‰∫ÜÂæàÂ∞ëÁöÑÂÜÖÂ≠òÔºå‰ΩÜÊòØ‰ªñ‰ª¨Âè†Âä†Âú®‰∏ÄËµ∑‰ºöÂ¢ûÂä†HeapÁöÑÂéãÂäõÔºå‰ªéËÄåËß¶ÂèëÊõ¥Â§öÂÖ∂‰ªñÁ±ªÂûãÁöÑGC„ÄÇËøô‰∏™Êìç‰ΩúÊúâÂèØËÉΩ‰ºöÂΩ±ÂìçÂà∞Â∏ßÁéáÔºåÂπ∂‰ΩøÂæóÁî®Êà∑ÊÑüÁü•Âà∞ÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</p>
<h2 id="‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï"><a href="#‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï" class="headerlink" title="‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï"></a>‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï</h2><p>Âú®Android‰∏≠ÂÜÖÂ≠ò‰ºòÂåñÁöÑÊñπÂºèÂÆûÂú®ÊòØÂ§™Â§ö‰∫ÜÔºåÂæÄÁªÜ‰∫ÜËØ¥ÔºåÂà∞‰Ω†ÂÜôÁöÑÊØè‰∏ÄË°å‰ª£Á†ÅÂÖ∂ÂÆûÈÉΩÂíåÂÜÖÂ≠ò‰ºòÂåñÁõ∏ÂÖ≥„ÄÇÂú®ËøôÈáåÊàë‰ªé‰∏â‰∏™ÊñπÈù¢Êù•ËØ¥‰∏ãAndroidÂÜÖÂ≠ò‰ºòÂåñÁöÑÊñπÊ≥ïÔºö</p>
<blockquote>
<ol>
<li>Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò</li>
<li>‰ª£Á†Å‰ºòÂåñ</li>
<li>ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ</li>
</ol>
</blockquote>
<p>Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂÖàËÄÉËôëÈôç‰ΩéÂ∫îÁî®ÁöÑËøêË°åÊó∂ÂÜÖÂ≠òÔºåÁÑ∂ÂêéÈíàÂØπ‰ª£Á†ÅÂÜôÁöÑ‰∏çÂ•ΩÁöÑÂú∞ÊñπÁùÄÈáç‰ºòÂåñÔºåÊúÄÂêéÈÄöËøáËßÑÈÅø‰∏Ä‰∫õÂèØËÉΩÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÁºñÁ†ÅÊñπÂºèÔºåÂéªÊèêÂâçÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÈóÆÈ¢ò„ÄÇ</p>
<h3 id="Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò"><a href="#Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò" class="headerlink" title="Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò"></a>Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò</h3><p><img src="https://img.carlwe.com/reduce_running_memory.jpg" alt=""></p>
<p>Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠òÂèØ‰ª•ÂàÜ‰∏∫ÂáèÂ∞èAPKÁöÑ‰ΩìÁßØÂíåBitmap‰ºòÂåñ‰∏§ÈÉ®ÂàÜÔºö</p>
<ul>
<li>ÂáèÂ∞èAPK‰ΩìÁßØ</li>
</ul>
<blockquote>
<ol>
<li>ÂéªÈô§Êó†Áî®ÁöÑËµÑÊ∫êÂíå‰ª£Á†ÅÔºåÈÄöËøáÂêàÁêÜ‰ΩøÁî®gitÔºå‰∏Ä‰∫õÁî±‰∫é‰∏öÂä°ÂèòÊõ¥ËÄåÂü∫Êú¨‰∏ç‰ºöÁî®Âà∞ÁöÑ‰ª£Á†ÅÔºåËØ•Âà†Èô§ÁöÑÁªù‰∏çËÉΩÊâãËΩØ„ÄÇÂç≥‰Ωø‰ª•ÂêéË¶ÅÁî®Âà∞ÔºåÈÄöËøágit‰πüËÉΩÊâæÂõû„ÄÇÂêåÊó∂‰∏Ä‰∫õÂõæÁâáËµÑÊ∫êÊú™Áî®Âà∞ÁöÑ‰πüÂ∫îËØ•Âà†Èô§ÔºåÂõ†‰∏∫Âç≥‰ΩøgradleÈÖç‰∫ÜsharkresourceÈÄâÈ°πÔºåÂèëÂ∏ÉÁöÑÊó∂ÂÄôËøô‰∫õÊ≤°ÊúâÁî®Âà∞ÁöÑÂõæÁâá‰æùÁÑ∂‰ºöË¢´ÊâìÂåÖÂà∞‰Ω†ÁöÑapk„ÄÇ</li>
<li>Â∞ΩÈáèÂ§çÁî®ËµÑÊ∫êÔºåÂÖ∂ÂÆûËøôÊòØ‰∏ÄÁßçÊØîËæÉÂ•ΩÁöÑÁºñÁ†Å‰π†ÊÉØ„ÄÇ</li>
<li>ÂØπÂ∫îÁî®ÁöÑÂêØÂä®ÂõæÂºïÂØºÈ°µÂõæÁâáËøõË°åÂéãÁº©ÔºåÂæÄÂæÄËøô‰∫õÂõæÁâáÂç†ÊçÆ‰∫ÜÂ§ßÈÉ®ÂàÜÁ©∫Èó¥ÔºåÂéãÁº©ÂêéÂèØ‰ª•Ëµ∑Âà∞ÂæàÂ•ΩÁöÑÊïàÊûú„ÄÇÂπ≥Êó∂ÂºÄÂèë‰∏≠ÂØπ‰∫éÂàÜËæ®ÁéáÂ§ßÈõ®100*100ÁöÑÂõæÁâáÂü∫Êú¨‰∏äÈÉΩ‰ºöËøõË°åÂéãÁº©ÔºåÂæàÂ§öÂ•ΩÁöÑÂéãÁº©ÁÆóÊ≥ïÁªèÂ∏∏ÂèØ‰ª•ÂáèÂ∞ë‰∏ÄÂçäÁöÑÂ§ßÂ∞èÔºåËÄåÊÑüÂÆò‰∏äÂü∫Êú¨Áúã‰∏çÂá∫Êúâ‰ªª‰ΩïÊîπÂèò„ÄÇ</li>
</ol>
</blockquote>
<ul>
<li>Bitmap‰ºòÂåñ</li>
</ul>
<blockquote>
<ol>
<li>Áªü‰∏ÄÁöÑbitmapÂä†ËΩΩÂô®ÔºåÈÄâÊã©Glide„ÄÅFresco„ÄÅPicasso‰∏≠ÁöÑ‰∏Ä‰∏™‰Ωú‰∏∫ÂõæÁâáÂä†ËΩΩÊ°ÜÊû∂„ÄÇÂÆûÈôÖÂºÄÂèë‰∏≠Âä†ËΩΩÂà∞viewÁöÑÂõæÁâáÁöÑÂ§ßÂ∞è‰∏çÂ∫îËØ•Ë∂ÖËøáviewÁöÑÂ§ßÂ∞èÔºåÂõæÁâáÂä†ËΩΩÊ°ÜÊû∂ÈªòËÆ§‰ºöÂØπÂõæÁâáËøõË°åÁºìÂ≠òÔºåÊåâviewÂÆûÈôÖÂ§ßÂ∞èÂä†ËΩΩ„ÄÇÂú®ÂºÄÂèë‰∏≠‰∏∫‰∫ÜÂáèÂ∞ëapkÁöÑÂ§ßÂ∞èÔºå‰∏ÄËà¨Âè™Êîæ‰∏ÄÂ•ó3XÂõæÁâáÔºå‰ΩÜÊòØËøô‰∫õÂõæÁâáÂú®Â∞èÂàÜËæ®ÁéáÁöÑÊâãÊú∫‰∏äÁõ¥Êé•Âä†ËΩΩÂ∞±‰ºöÂá∫Áé∞ÂÜÖÂ≠òÊµ™Ë¥π„ÄÇÁªü‰∏ÄÁöÑbitmapÂä†ËΩΩÂô®Â∞±ÂèØ‰ª•ÂæàÂ•ΩÁöÑËß£ÂÜ≥ËØ•ÈóÆÈ¢ò„ÄÇ</li>
<li>ÂõæÁâáÂ≠òÂú®ÂÉèÁ¥†Êµ™Ë¥πÔºåÂØπ‰∫é.9ÂõæÔºåÁæéÂ∑•ÂèØËÉΩÂú®Âá∫ÂõæÊó∂Âú®Êãâ‰º∏‰∏éÈùûÊãâ‰º∏Âå∫ÂüüÈÉΩÊúâÂ§ßÈáèÁöÑÂÉèÁ¥†ÈáçÂ§ç„ÄÇËÄåËøô‰∫õÂõæÁâáÊòØÂèØ‰ª•Áº©Â∞èÔºå‰ΩÜÂπ∂‰∏çÂΩ±ÂìçÊòæÁ§∫ÊïàÊûú„ÄÇ</li>
<li>inSampleSize:Áº©ÊîæÊØî‰æãÔºåÂú®ÊääÂõæÁâáËΩΩÂÖ•ÂÜÖÂ≠ò‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅËÆ°ÁÆó‰∏Ä‰∏™ÂêàÈÄÇÁöÑÁº©ÊîæÊØî‰æãÔºåÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂ§ßÂõæËΩΩÂÖ•„ÄÇ</li>
<li>ÈÄâÊã©ARGB_8888/RBG_565/ARGB_4444/ALPHA_8ÔºåÂ≠òÂú®ÂæàÂ§ßÂ∑ÆÂºÇ„ÄÇ</li>
<li>inBitmapÔºöËøô‰∏™ÂèÇÊï∞Áî®Êù•ÂÆûÁé∞BitmapÂÜÖÂ≠òÁöÑÂ§çÁî®Ôºå‰ΩÜÂ§çÁî®Â≠òÂú®‰∏Ä‰∫õÈôêÂà∂ÔºåÂÖ∑‰Ωì‰ΩìÁé∞Âú®ÔºöÂú®Android 4.4‰πãÂâçÂè™ËÉΩÈáçÁî®Áõ∏ÂêåÂ§ßÂ∞èÁöÑBitmapÁöÑÂÜÖÂ≠òÔºåËÄåAndroid 4.4Âèä‰ª•ÂêéÁâàÊú¨ÂàôÂè™Ë¶ÅÂêéÊù•ÁöÑBitmapÊØî‰πãÂâçÁöÑÂ∞èÂç≥ÂèØ„ÄÇ‰ΩøÁî®inBitmapÂèÇÊï∞ÂâçÔºåÊØèÂàõÂª∫‰∏Ä‰∏™BitmapÂØπË±°ÈÉΩ‰ºöÂàÜÈÖç‰∏ÄÂùóÂÜÖÂ≠ò‰æõÂÖ∂‰ΩøÁî®ÔºåËÄå‰ΩøÁî®‰∫ÜinBitmapÂèÇÊï∞ÂêéÔºåÂ§ö‰∏™BitmapÂèØ‰ª•Â§çÁî®‰∏ÄÂùóÂÜÖÂ≠òÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</li>
</ol>
</blockquote>
<p>ÂèÇËÄÉÔºö</p>
<p>Android ÂÆòÁΩëÊñáÊ°£<a href="https://developer.android.com/topic/performance/graphics/manage-memory?hl=zh-cn" target="_blank" rel="noopener">Managing Bitmap Memory</a>„ÄÅ<a href="https://developer.android.com/topic/performance/graphics/?hl=zh-cn" target="_blank" rel="noopener">Handling bitmaps</a></p>
<h3 id="‰ª£Á†Å‰ºòÂåñ"><a href="#‰ª£Á†Å‰ºòÂåñ" class="headerlink" title="‰ª£Á†Å‰ºòÂåñ"></a>‰ª£Á†Å‰ºòÂåñ</h3><p>ËøôÈáå‰ªãÁªç‰∏Ä‰∫õÂ•ΩÁöÑÁºñÁ†Å‰π†ÊÉØÔºö</p>
<p><img src="https://img.carlwe.com/code_optimize.jpg" alt=""></p>
<ol>
<li><p>ËÄÉËôë‰ΩøÁî®ArrayMap/SpareseArrayËÄå‰∏çÊòØ‰º†ÁªüÁöÑHashMapÁ≠âÊï∞ÊçÆÁªìÊûÑÔºåAndroidÁ≥ªÁªü‰∏∫ÁßªÂä®Á≥ªÁªüËÆæËÆ°ÁöÑÂÆπÂô®ArrayMapÊõ¥Âä†È´òÊïàÔºåÂç†Áî®ÂÜÖÂ≠òÊõ¥Â∞ëÔºåÂõ†‰∏∫HashMapÈúÄË¶Å‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂÆû‰æãÂØπË±°Êù•ËÆ∞ÂΩïMappingÁöÑÊìç‰Ωú„ÄÇËÄåSparesArrayÈ´òÊïàÁöÑÈÅøÂÖç‰∫ÜkeyÂíåvalueÁöÑËá™Âä®Ë£ÖÁÆ±ÔºåËÄå‰∏îÈÅøÂÖç‰∫ÜË£ÖÁÆ±ÂêéÁöÑËß£ÁÆ±„ÄÇËØ¶ÁªÜÂèÇËÄÉ<a href="http://hukai.me/android-performance-patterns-season-3/" target="_blank" rel="noopener">AndroidÊÄßËÉΩ‰ºòÂåñÂÖ∏ËåÉ</a></p>
</li>
<li><p>Âú®onDrawËøôÁßçÈ¢ëÁπÅË∞ÉÁî®ÁöÑÊñπÊ≥ïË¶ÅÈÅøÂÖçÂØπË±°ÁöÑÂàõÂª∫Êìç‰ΩúÔºåÂõ†‰∏∫‰ªñ‰ºöËøÖÈÄüÂ¢ûÂä†ÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÔºåÂºïËµ∑È¢ëÁπÅÁöÑgcÔºåÁîöËá≥ÂÜÖÂ≠òÊäñÂä®„ÄÇ</p>
</li>
<li><p>SoftReference(ËΩØÂºïÁî®)„ÄÅWeakReference(Âº±ÂºïÁî®)„ÄÅPhantomReference(ËôöÂºïÁî®)</p>
<blockquote>
<p><code>SoftReference</code>ÔºöÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°Âè™ÂÖ∑ÊúâËΩØÂºïÁî®ÔºåÂàôÂÜÖÂ≠òÁ©∫Èó¥Ë∂≥Â§üÔºåÂûÉÂúæÂõûÊî∂Âô®Â∞±‰∏ç‰ºöÂõûÊî∂ÂÆÉÔºõÂ¶ÇÊûúÂÜÖÂ≠òÁ©∫Èó¥‰∏çË∂≥‰∫ÜÔºåÂ∞±‰ºöÂõûÊî∂Ëøô‰∫õÂØπË±°ÁöÑÂÜÖÂ≠ò„ÄÇÂè™Ë¶ÅÂûÉÂúæÂõûÊî∂Âô®Ê≤°ÊúâÂõûÊî∂ÂÆÉÔºåËØ•ÂØπË±°Â∞±ÂèØ‰ª•Ë¢´Á®ãÂ∫è‰ΩøÁî®„ÄÇËΩØÂºïÁî®ÂèØÁî®Êù•ÂÆûÁé∞ÂÜÖÂ≠òÊïèÊÑüÁöÑÈ´òÈÄüÁºìÂ≠ò„ÄÇ</p>
<p><code>WeakReference</code>Ôºö‰∏éËΩØÂºïÁî®ÁöÑÂå∫Âà´Âú®‰∫éÔºöÂè™ÂÖ∑ÊúâÂº±ÂºïÁî®ÁöÑÂØπË±°Êã•ÊúâÊõ¥Áü≠ÊöÇÁöÑÁîüÂëΩÂë®Êúü„ÄÇÂú®ÂûÉÂúæÂõûÊî∂Âô®Á∫øÁ®ãÊâ´ÊèèÂÆÉÊâÄÁÆ°ËæñÁöÑÂÜÖÂ≠òÂå∫ÂüüÁöÑËøáÁ®ã‰∏≠Ôºå‰∏ÄÊó¶ÂèëÁé∞‰∫ÜÂè™ÂÖ∑ÊúâÂº±ÂºïÁî®ÁöÑÂØπË±°Ôºå‰∏çÁÆ°ÂΩìÂâçÂÜÖÂ≠òÁ©∫Èó¥Ë∂≥Â§ü‰∏éÂê¶ÔºåÈÉΩ‰ºöÂõûÊî∂ÂÆÉÁöÑÂÜÖÂ≠ò„ÄÇ‰∏çËøáÔºåÁî±‰∫éÂûÉÂúæÂõûÊî∂Âô®ÊòØ‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÂæà‰ΩéÁöÑÁ∫øÁ®ãÔºåÂõ†Ê≠§‰∏ç‰∏ÄÂÆö‰ºöÂæàÂø´ÂèëÁé∞ÈÇ£‰∫õÂè™ÂÖ∑ÊúâÂº±ÂºïÁî®ÁöÑÂØπË±°„ÄÇ </p>
<p><code>PhantomReference</code>ÔºöËôöÂºïÁî®‚ÄùÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÂΩ¢ÂêåËôöËÆæÔºå‰∏éÂÖ∂‰ªñÂá†ÁßçÂºïÁî®ÈÉΩ‰∏çÂêåÔºåËôöÂºïÁî®Âπ∂‰∏ç‰ºöÂÜ≥ÂÆöÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°‰ªÖÊåÅÊúâËôöÂºïÁî®ÔºåÈÇ£‰πàÂÆÉÂ∞±ÂíåÊ≤°Êúâ‰ªª‰ΩïÂºïÁî®‰∏ÄÊ†∑ÔºåÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩÂèØËÉΩË¢´ÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂„ÄÇËôöÂºïÁî®‰∏ªË¶ÅÁî®Êù•Ë∑üË∏™ÂØπË±°Ë¢´ÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂ÁöÑÊ¥ªÂä®„ÄÇËôöÂºïÁî®‰∏éËΩØÂºïÁî®ÂíåÂº±ÂºïÁî®ÁöÑ‰∏Ä‰∏™Âå∫Âà´Âú®‰∫éÔºöËôöÂºïÁî®ÂøÖÈ°ªÂíåÂºïÁî®ÈòüÂàó ÔºàReferenceQueueÔºâËÅîÂêà‰ΩøÁî®„ÄÇÂΩìÂûÉÂúæÂõûÊî∂Âô®ÂáÜÂ§áÂõûÊî∂‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåÂ¶ÇÊûúÂèëÁé∞ÂÆÉËøòÊúâËôöÂºïÁî®ÔºåÂ∞±‰ºöÂú®ÂõûÊî∂ÂØπË±°ÁöÑÂÜÖÂ≠ò‰πãÂâçÔºåÊääËøô‰∏™ËôöÂºïÁî®Âä†ÂÖ•Âà∞‰∏é‰πã ÂÖ≥ËÅîÁöÑÂºïÁî®ÈòüÂàó‰∏≠„ÄÇ    </p>
</blockquote>
</li>
<li><p>Ë∞®ÊÖé‰ΩøÁî®large heapÔºåandroidËÆæÂ§áÁî±‰∫éËΩØÁ°¨‰ª∂ÁöÑÂ∑ÆÂºÇÔºåheapÈòÄÂÄº‰∏çÂêåÔºåÁâπÊÆäÊÉÖÂÜµ‰∏ãÂèØ‰ª•Âú®manifest‰∏≠‰ΩøÁî®<code>largeheap=true</code>Â£∞Êòé‰∏Ä‰∏™Êõ¥Â§ßÁöÑheapÁ©∫Èó¥Ôºå‰ΩøÁî®getLargeMemoryClass()Êù•Ëé∑ÂèñÂà∞Ëøô‰∏™Êõ¥Â§ßÁöÑÁ©∫Èó¥„ÄÇ‰ΩÜÊòØË¶ÅË∞®ÊÖé‰ΩøÁî®ÔºåÂõ†‰∏∫È¢ùÂ§ñÁöÑÁ©∫Èó¥‰ºöÂΩ±ÂìçÂà∞Á≥ªÁªüÊï¥‰ΩìÁöÑÁî®Êà∑‰ΩìÈ™åÔºåÂàáÊç¢‰ªªÂä°Êó∂ÊÄßËÉΩÂ§ßÊâìÊäòÊâ£ÔºåÂØπ‰∫éoomÂºÇÂ∏∏ÊòØÊ≤ªÊ†á‰∏çÊ≤ªÊú¨ÁöÑ‰∏ÄÁßçÂÅöÊ≥ï„ÄÇ</p>
</li>
<li><p>Ë∞®ÊÖé‰ΩøÁî®Â§öËøõÁ®ãÔºå‰ΩøÁî®Â§öËøõÁ®ãÂèØ‰ª•ÊääÂ∫îÁî®‰∏≠ÁöÑÈÉ®ÂàÜÁªÑ‰ª∂ËøêË°åÂú®ÂçïÁã¨ÁöÑËøõÁ®ãÂΩì‰∏≠ÔºåËøôÊ†∑ÂèØ‰ª•Êâ©Â§ßÂ∫îÁî®ÁöÑÂÜÖÂ≠òÂç†Áî®ËåÉÂõ¥Ôºå‰ΩÜÊòØËøô‰∏™ÊäÄÊúØÂøÖÈ°ªË∞®ÊÖé‰ΩøÁî®ÔºåÁªùÂ§ßÂ§öÊï∞Â∫îÁî®ÈÉΩ‰∏çÂ∫îËØ•Ë¥∏ÁÑ∂‰ΩøÁî®Â§öËøõÁ®ãÔºå‰∏ÄÊñπÈù¢ÊòØÂõ†‰∏∫‰ΩøÁî®Â§öËøõÁ®ã‰ºö‰ΩøÂæó‰ª£Á†ÅÈÄªËæëÊõ¥Âä†Â§çÊùÇÔºåÂè¶Â§ñÂ¶ÇÊûú‰ΩøÁî®‰∏çÂΩìÔºåÂÆÉÂèØËÉΩÂèçËÄå‰ºöÂØºËá¥ÊòæËëóÂ¢ûÂä†ÂÜÖÂ≠ò„ÄÇÂΩì‰Ω†ÁöÑÂ∫îÁî®ÈúÄË¶ÅËøêË°å‰∏Ä‰∏™Â∏∏È©ªÂêéÂè∞ÁöÑ‰ªªÂä°ÔºåËÄå‰∏îËøô‰∏™‰ªªÂä°Âπ∂‰∏çËΩªÈáèÔºåÂèØ‰ª•ËÄÉËôë‰ΩøÁî®Ëøô‰∏™ÊäÄÊúØÔºå‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ‰æãÂ≠êÊòØÂàõÂª∫‰∏Ä‰∏™ÂèØ‰ª•ÈïøÊó∂Èó¥ÂêéÂè∞Êí≠ÊîæÁöÑMusic Player„ÄÇÂ¶ÇÊûúÊï¥‰∏™Â∫îÁî®ÈÉΩËøêË°åÂú®‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÔºåÂΩìÂêéÂè∞Êí≠ÊîæÁöÑÊó∂ÂÄôÔºåÂâçÂè∞ÁöÑÈÇ£‰∫õUIËµÑÊ∫ê‰πüÊ≤°ÊúâÂäûÊ≥ïÂæóÂà∞ÈáäÊîæ„ÄÇÁ±ª‰ººËøôÊ†∑ÁöÑÂ∫îÁî®ÂèØ‰ª•ÂàáÂàÜÊàê2‰∏™ËøõÁ®ãÔºö‰∏Ä‰∏™Áî®Êù•Êìç‰ΩúUIÔºåÂè¶Â§ñ‰∏Ä‰∏™ÁªôÂêéÂè∞ÁöÑService„ÄÇ</p>
</li>
<li><p>ËÄÉËôëÁ¨¨‰∏âÊñπÂ∫ìÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûú‰ºöÂíåÁé∞ÊúâÁöÑ‰ª£Á†ÅÊàñÂÖ∂‰ªñÂ∫ìÁöÑ‰ª£Á†ÅÈáçÂ§çÔºåËÄÉËôë‰∏çË¶ÅÁúü‰∏™ÂºïÂÖ•ËÄåÊòØÊääÂ∫ìÁöÑ‰ª£Á†ÅÁ≤æÁÆÄ‰πãÂêéÂÜçÂºïÂÖ•„ÄÇ</p>
</li>
</ol>
<h3 id="ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ"><a href="#ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ" class="headerlink" title="ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ"></a>ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ</h3><p>ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂéüÂõ†ÊúâÂæàÂ§öÔºå‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅÂú®ÂºÄÂèë‰∏≠Â§öÊ≥®ÊÑèÔºö</p>
<p><img src="https://img.carlwe.com/memory_leak_optimize.jpg" alt=""></p>
<ol>
<li><p>ActivityË∞ÉÁî®‰∫ÜfinishÔºå‰ΩÜÊòØÂºïÁî®ActivityÁöÑÂØπË±°Êú™Ë¢´ÈáäÊîæ(ÁîüÂëΩÂë®ÊúüÊ≤°ÊúâÁªìÊùü)ÔºåActivity ContextË¢´‰º†ÈÄíÂà∞ÂÖ∂‰ªñÂÆû‰æã‰∏≠ÔºåÂèØËÉΩÂØºËá¥Ëá™Ë∫´Ë¢´ÂºïÁî®ËÄåÂèëÁîüÊ≥ÑÈú≤ÔºåÂª∫ËÆÆ‰ΩøÁî®weakReferce„ÄÇ</p>
</li>
<li><p>Èô§ÂøÖÈ°ª‰ΩøÁî®Activity ContextÁöÑÊÉÖÂÜµ(DialogÁöÑcontextÂøÖÈ°ªÊòØActivity),Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Application ContextÊù•ÈÅøÂÖçActivityÊ≥ÑÈú≤„ÄÇ</p>
</li>
<li><p>Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂØπBitmapÂØπË±°Â¢ûÂä†ÁºìÂ≠òÊú∫Âà∂Ôºå‰ΩÜÊòØÊúâÊó∂ÂÄôÈÉ®ÂàÜbitmapÈúÄË¶ÅÂèäÊó∂ÂõûÊî∂„ÄÇÊØîÂ¶ÇÊàë‰ª¨‰∏¥Êó∂ÂàõÂª∫ÁöÑÊë∏‰∏™Áõ∏ÂØπÂ§ßÁöÑbitmapÂØπË±°ÔºåÂèòÊç¢ÂæóÂà∞Êñ∞ÁöÑbitmapÂØπË±°ÂêéÔºåÂ∞ΩÂø´ÂõûÊî∂ÂéüÂßãÁöÑbitmapÔºåÂèäÊó∂ÈáäÊîæÂéüÊù•ÁöÑÁ©∫Èó¥„ÄÇ</p>
</li>
<li><p>webviewÂºïËµ∑ÁöÑÂÜÖÂ≠òÊ≥ÑÊºè‰∏ªË¶ÅÊòØÂõ†‰∏∫org.chromium.android_webview.AwContents Á±ª‰∏≠Ê≥®ÂÜå‰∫Ücomponent callbacksÔºå‰ΩÜÊòØÊú™Ê≠£Â∏∏ÂèçÊ≥®ÂÜåËÄåÂØºËá¥ÁöÑ„ÄÇËÆ©onDetachedFromWindowÂÖàËµ∞ÔºåÂú®‰∏ªÂä®Ë∞ÉÁî®destroy()‰πãÂâçÔºåÊääwebview‰ªéÂÆÉÁöÑparent‰∏äÈù¢ÁßªÈô§Êéâ(Basewebfragment onDestroy())</p>
</li>
<li><p>ËôΩÁÑ∂Âçï‰æãÊ®°ÂºèÁÆÄÂçïÂÆûÁî®ÔºåÊèê‰æõ‰∫ÜÂæàÂ§ö‰æøÂà©ÊÄßÔºå‰ΩÜÊòØÂõ†‰∏∫Âçï‰æãÁöÑÁîüÂëΩÂë®ÊúüÂíåÂ∫îÁî®‰øùÊåÅ‰∏ÄËá¥Ôºå‰ΩøÁî®‰∏çÂêàÁêÜÂæàÂÆπÊòìÂá∫Áé∞ÊåÅÊúâÂØπË±°ÁöÑÊ≥ÑÊºè„ÄÇ</p>
</li>
<li><p>Êàë‰ª¨Âú®ÂØπÊï∞ÊçÆÂ∫ìËøõË°åÊìç‰ΩúÊó∂Ôºå‰ΩøÁî®ÂÆåcursorÊ≤°ÊúâÂèäÊó∂ÂÖ≥Èó≠ÔºåcursorÁöÑÊ≥ÑÈú≤Ôºå‰ºöÂØπÂÜÖÂ≠òÁÆ°ÁêÜÂ∏¶Êù•Ë¥üÈù¢ÂΩ±Âìç„ÄÇ</p>
</li>
<li><p>Ë∞®ÊÖé‰ΩøÁî®staticÂØπË±°ÔºåÂõ†‰∏∫staticÁöÑÁîüÂëΩÂë®ÊúüËøáÈïøÔºåÂíåÂ∫îÁî®ÁöÑËøõÁ®ã‰øùÊåÅ‰∏ÄËá¥Ôºå‰ΩøÁî®‰∏çÂΩìÂæàÂèØËÉΩÂØºËá¥ÂØπË±°Ê≥ÑÊºè„ÄÇ</p>
</li>
</ol>
<p><code>ÊÄªÁªì</code>ÔºöÂú®ÂÆûÈôÖÁöÑÁ∫ø‰∏äÁéØÂ¢É‰∏≠ÂèëÁé∞ÔºåÂ§ßÈÉ®ÂàÜÂÜÖÂ≠òÊ≥ÑÊºèÊòØÂõ†‰∏∫Ë¢´Ë∞ÉÁî®ÁöÑÂØπË±°ÁîüÂëΩÂë®Êúü‰∏çÂêåÊ≠•ÂØºËá¥ÔºåÁîüÂëΩÂë®Êúü‰∏çÂêåÊ≠•‰∏ç‰ªÖ‰ªÖ‰ºöÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÊºèÔºåÊõ¥‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÔºåÂ¥©Ê∫ÉÁ≠âÊõ¥‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇ</p>
<h3 id="ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü"><a href="#ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü" class="headerlink" title="ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü"></a>ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü</h3><p><img src="https://img.carlwe.com/memory_is_enough.jpg" alt=""></p>
<p>ÂâçÈù¢Êàë‰ª¨Â∑≤Áªè‰ªéÁ≥ªÁªüÁ∫ßÂà´‰∫ÜËß£‰∫ÜAndroid Framework„ÄÅDarlvik/ArtËôöÊãüÊú∫„ÄÅLinuxÂú®ÂÜÖÂ≠òÂàÜÈÖç‰∏äÁöÑÂéüÁêÜÔºåÊé•ÁùÄÂèàÂú®‰ª£Á†ÅÁ∫ßÂà´ÂàÜÂà´‰ªéÂáèÂ∞ëÂÜÖÂ≠òÂç†Áî®„ÄÅÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÂíå‰ª£Á†Å‰ºòÂåñ‰∏â‰∏™ÊñπÈù¢‰ªãÁªç‰∫ÜÂ¶Ç‰ΩïÈÅøÂÖçÂÜÖÂ≠òÈóÆÈ¢òÔºåÂÜçÂä†‰∏äÂΩìÂâçÁßëÊäÄÂèëÂ±ïÊòØÂ¶ÇÊ≠§ËøÖÈÄüÔºå4GBÂÜÖÂ≠òÂ∑≤ÁªèÊòØÂæàÂ∏∏ËßÅÁöÑÊâãÊú∫ÈÖçÁΩÆ„ÄÇLPDDR4XÁöÑÈ´òÈÄüÈó™Â≠ò‰πüË∂äÊù•Ë∂äË¢´ÂπøÊ≥õÁöÑ‰ΩøÁî®„ÄÇÂØπ‰∫éÂÜÖÂ≠ò‰ºòÂåñÊàë‰ª¨ÊòØ‰∏çÊòØÂ∞±Â∑≤ÁªèÂèØ‰ª•È´òÊûïÊó†Âøß‰∫ÜÔºåÊúâ‰∏äÈù¢Ëøô‰∫õÂ∞±Â§ü‰∫ÜÂêóÔºü</p>
<p>ÊàëÊÉ≥Âç≥‰ΩøÊàë‰ª¨ÂÜç‰∫ÜËß£ÂÜÖÂ≠òÔºåÂÜôÁöÑ‰ª£Á†ÅÂÜçÂ•ΩÔºåÁî®Êà∑ÁöÑÊâãÊú∫ÂÜçÂÖàËøõÔºåÊÄªËøòÊòØÊúâÂá∫ÈîôÁöÑÊó∂ÂÄôÔºåÈÇ£‰πà‰∫ãÂêéÁöÑÂÜÖÂ≠òÂàÜÊûêÂíåÁõëÊéßÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑ‰∫ÜÔºÅ</p>
<h2 id="‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß"><a href="#‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß" class="headerlink" title="‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß"></a>‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß</h2><p>AndroidÂÜÖÂ≠òÂàÜÊûêÂíåÁõëÊéß‰∏ªË¶Å‰ªãÁªçÂ¶Ç‰∏ãÂõõÁßçÊñπÂºèÔºö</p>
<blockquote>
<ol>
<li>Êü•ÁúãGCÊó•Âøó</li>
<li>Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ</li>
<li>ÈÄöËøáLeakCanaryÁõëÊéßÂÜÖÂ≠ò Ê≥ÑÊºè</li>
<li>Á∫ø‰∏äÁõëÊéß</li>
</ol>
</blockquote>
<h3 id="Êü•ÁúãGCÊó•Âøó"><a href="#Êü•ÁúãGCÊó•Âøó" class="headerlink" title="Êü•ÁúãGCÊó•Âøó"></a>Êü•ÁúãGCÊó•Âøó</h3><h4 id="GCÁöÑÁ±ªÂûãÔºö"><a href="#GCÁöÑÁ±ªÂûãÔºö" class="headerlink" title="GCÁöÑÁ±ªÂûãÔºö"></a>GCÁöÑÁ±ªÂûãÔºö</h4><p><img src="https://img.carlwe.com/gc_type.jpg" alt=""></p>
<p><code>Concurrent</code>Ôºö ‰∏ç‰ºöÊöÇÂÅúÂ∫îÁî®Á∫øÁ®ãÁöÑÂπ∂ÂèëÂûÉÂúæÂõûÊî∂„ÄÇÊ≠§ÂûÉÂúæÂõûÊî∂Âú®ÂêéÂè∞Á∫øÁ®ã‰∏≠ËøêË°åÔºåËÄå‰∏î‰∏ç‰ºöÈòªÊ≠¢ÂàÜÈÖç„ÄÇ</p>
<p><code>Alloc</code>Ôºö ÊÇ®ÁöÑÂ∫îÁî®Âú®Â†ÜÂ∑≤Êª°Êó∂Â∞ùËØïÂàÜÈÖçÂÜÖÂ≠òÂºïËµ∑ÁöÑÂûÉÂúæÂõûÊî∂„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂàÜÈÖçÁ∫øÁ®ã‰∏≠ÂèëÁîü‰∫ÜÂûÉÂúæÂõûÊî∂„ÄÇ</p>
<p><code>Explicit</code>ÔºöÁî±Â∫îÁî®ÊòéÁ°ÆËØ∑Ê±ÇÁöÑÂûÉÂúæÂõûÊî∂Ôºå‰æãÂ¶ÇÔºåÈÄöËøáË∞ÉÁî®system.gc()„ÄÇ‰∏é Dalvik Áõ∏ÂêåÔºåÂú® ART ‰∏≠ÔºåÊúÄ‰Ω≥ÂÅöÊ≥ïÊòØÊÇ®Â∫î‰ø°‰ªªÂûÉÂúæÂõûÊî∂Âπ∂ÈÅøÂÖçËØ∑Ê±ÇÊòæÂºèÂûÉÂúæÂõûÊî∂ÔºàÂ¶ÇÊûúÂèØËÉΩÔºâ„ÄÇ‰∏çÂª∫ËÆÆ‰ΩøÁî®ÊòæÂºèÂûÉÂúæÂõûÊî∂ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰ºöÈòªÊ≠¢ÂàÜÈÖçÁ∫øÁ®ãÂπ∂‰∏çÂøÖË¶ÅÂú∞Êµ™Ë¥π CPU Âë®Êúü„ÄÇÂ¶ÇÊûúÊòæÂºèÂûÉÂúæÂõûÊî∂ÂØºËá¥ÂÖ∂‰ªñÁ∫øÁ®ãË¢´Êä¢Âç†ÔºåÈÇ£‰πàÂÆÉ‰ª¨‰πüÂèØËÉΩ‰ºöÂØºËá¥Âç°È°øÔºàÂ∫îÁî®‰∏≠Âá∫Áé∞Èó¥Êñ≠„ÄÅÊäñÂä®ÊàñÊöÇÂÅúÔºâ</p>
<p><code>NativeAlloc</code>ÔºöÂéüÁîüÂàÜÈÖçÔºàÂ¶Ç‰ΩçÂõæÊàñ RenderScript ÂàÜÈÖçÂØπË±°ÔºâÂØºËá¥Âá∫Áé∞ÂéüÁîüÂÜÖÂ≠òÂéãÂäõÔºåËøõËÄåÂºïËµ∑ÁöÑÂõûÊî∂„ÄÇ</p>
<h4 id="Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó"><a href="#Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó" class="headerlink" title="Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó"></a>Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó</h4><p><img src="https://img.carlwe.com/gc_log.jpg" alt=""></p>
<p>Âú®AndroidStudio LogcatËøáÊª§GCÔºåÁÑ∂ÂêéÊìç‰ΩúApp‰∏ÄÊÆµÊó∂Èó¥Âêé‰ºöÂá∫Áé∞‰∏äÂõæÁöÑGCÂÜÖÂÆπÔºö</p>
<blockquote>
<p><code>ÂûÉÂúæÂõûÊî∂ÂéüÂõ†+ÂûÉÂúæÂõûÊî∂ÁöÑÂêçÁß∞+ÈáäÊîæÂØπË±°+ÈáäÊîæÂØπË±°Â§ßÂ∞è+ÈáäÊîæÂ§ßÂûãÂØπË±°ÁöÑÂ§ßÂ∞è+Â†ÜÁªüËÆ°Êï∞ÊçÆ+ÊöÇÂÅúÊó∂Èó¥</code></p>
<p><code>LOS objects</code>ÊòØÂâçÈù¢ÊâÄËØ¥Âà∞ÁöÑArtËôöÊãüÊú∫Êñ∞Â¢ûÁöÑ</p>
<p>ÁùÄÈáçÂÖ≥Ê≥®ÊúÄÂêéÈù¢ÁöÑÊöÇÂÅúÊó∂Èó¥ÔºåË∂ÖËøá16ms‰ºöÂΩ±ÂìçÁïåÈù¢Ôºå‰∏ÄËà¨Â§ß‰∫é700ms‰ºöÂΩ±Âìç‰ΩìÈ™åÔºåAndroid Vitals Â∞ÜËøûÁª≠‰∏¢Â∏ßË∂ÖËøá 700 ÊØ´ÁßíÂÆö‰πâ‰∏∫ÂÜªÂ∏ßÔºå‰πüÂ∞±ÊòØ42Â∏ß</p>
</blockquote>
<h3 id="Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ"><a href="#Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ" class="headerlink" title="Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ"></a>Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ</h3><p>ÈÄöËøáÊü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµÊù•ÂàÜÊûêAppÁöÑÂÜÖÂ≠òÂç†Áî®ÊòØÈùûÂ∏∏ÂøÖË¶ÅÁöÑÔºå‰∏ãÈù¢ÂàÜÂà´‰ªãÁªçÂ¶Ç‰∏ã‰∏§ÁßçÊñπÂºèÔºö</p>
<blockquote>
<ol>
<li>adb shell</li>
<li>Profiler</li>
</ol>
</blockquote>
<h4 id="Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ-1"><a href="#Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ-1" class="headerlink" title="Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ"></a>Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ</h4><p><img src="https://img.carlwe.com/adb_dumpsys.jpg" alt=""></p>
<p>ËØ¶ÁªÜÁöÑ‰ΩøÁî®ËØ∑ÂèÇËÄÉAndroidDeveloper<a href="https://developer.android.com/studio/profile/investigate-ram?hl=zh-cn" target="_blank" rel="noopener">Ë∞ÉÊü•RAM‰ΩøÁî®ÊÉÖÂÜµ</a></p>
<h4 id="‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò"><a href="#‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò" class="headerlink" title="‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò"></a>‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò</h4><p>AndroidStudioÁöÑProfilerÂäüËÉΩË∂äÊù•Ë∂äÂº∫Â§ßÔºå‰∏ç‰ªÖÈõÜÊàê‰∫ÜÂÜÖÂ≠òÂàÜÊûêÔºåËøòÊúâÁîµÈáè„ÄÅCPU„ÄÅÁΩëÁªúÁ≠âÊï∞ÊçÆÁöÑÂàÜÊûê„ÄÇ</p>
<p><img src="https://img.carlwe.com/use_profiler.jpg" alt=""></p>
<p>Â¶Ç‰ΩïÈÄöËøáProfilerËøõË°åÂÜÖÂ≠òÁöÑÂàÜÊûêÔºåÂ¶Ç‰ΩïÊâæÂà∞ÂÜÖÂ≠òÊ≥ÑÊºèËØ∑Êü•Áúã</p>
<p><a href="https://developer.android.com/studio/profile/memory-profiler" target="_blank" rel="noopener">‰ΩøÁî® Memory Profiler Êü•Áúã Java Â†ÜÂíåÂÜÖÂ≠òÂàÜÈÖç</a></p>
<p>ËøôÈáåË¶ÅËØ¥‰∏ãÔºåAndroidÂÆòÁΩëÁöÑÂæàÂ§öÊñáÁ´†ÈÉΩË¢´ÁøªËØëÊàê‰∫Ü‰∏≠ÊñáÔºåËøôÂØπÂõΩÂÜÖÁöÑÂºÄÂèëËÄÖÊù•ËØ¥Ë∂äÊù•Ë∂äÊúâÂ•Ω‰∫ÜÔºå‰ΩÜË¶ÅÊ≥®ÊÑè‰∏≠ÊñáÁøªËØëÁöÑÊñáÁ´†‰ºöÊØîËæÉÊªûÂêéÔºåÊúÄÊñ∞Áâà‰∏ÄËà¨ÈÉΩÊòØËã±Êñá„ÄÇ</p>
<h3 id="‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè"><a href="#‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè" class="headerlink" title="‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè"></a>‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè</h3><p><img src="https://img.carlwe.com/leakcanary_logo.png" alt=""></p>
<p><code>LeakCanaryÂêçÂ≠óÁöÑÁî±Êù•</code>ÔºöCanaryÊòØÁÖ§Áüø‰∏≠Èáë‰∏ùÈõÄË°®ËææÁöÑÂèÇËÄÉÔºåÊöóÁ§∫‰∫ÜÁüøÂ∑•Â∞ÜÈöèË∫´Êê∫Â∏¶ËøõÂÖ•Áüø‰∫ïÈößÈÅìÁöÑÁ¨ºÂÖªÈáë‰∏ùÈõÄÔºàÈ∏üÁ±ªÔºâ„ÄÇÂ¶ÇÊûúÂú®Áüø‰∫ï‰∏≠Êî∂ÈõÜÂà∞‰∏ÄÊ∞ßÂåñÁ¢≥Á≠âÂç±Èô©Ê∞î‰ΩìÔºåËøô‰∫õÊ∞î‰Ωì‰ºöÂú®ÊùÄÊ≠ªÁüøÂ∑•‰πãÂâçÊùÄÊ≠ªÈáë‰∏ùÈõÄÔºå‰ªéËÄåÊèê‰æõË≠¶ÂëäÁ´ãÂç≥Á¶ªÂºÄÈößÈÅì„ÄÇ</p>
<p><code>ÂéüÁêÜ</code>ÔºöLeakCanaryÈÄöËøáApplicationContextÁªü‰∏ÄÊ≥®ÂÜåÁõëÂê¨ÁöÑÊñπÂºèÔºåÈÄöËøáapplication.registerActivityLifecycleCallbacksÊù•ÁªëÂÆöActivityÁîüÂëΩÂë®ÊúüÁöÑÁõëÂê¨Ôºå‰ªéËÄåÁõëÊéßÊâÄÊúâActivity; Âú®ActivityÊâßË°åonDestroyÊó∂ÔºåÂºÄÂßãÊ£ÄÊµãÂΩìÂâçÈ°µÈù¢ÊòØÂê¶Â≠òÂú®ÂÜÖÂ≠òÊ≥ÑÊºèÔºåÂπ∂ÂàÜÊûêÁªìÊûú„ÄÇKeyedWeakReference‰∏éReferenceQueueËÅîÂêà‰ΩøÁî®ÔºåÂú®Âº±ÂºïÁî®ÂÖ≥ËÅîÁöÑÂØπË±°Ë¢´ÂõûÊî∂ÂêéÔºå‰ºöÂ∞ÜÂºïÁî®Ê∑ªÂä†Âà∞ReferenceQueueÔºõÊ∏ÖÁ©∫ÂêéÔºåÂèØ‰ª•Ê†πÊçÆÊòØÂê¶ÁªßÁª≠Âê´ÊúâËØ•ÂºïÁî®Êù•Âà§ÂÆöÊòØÂê¶Ë¢´ÂõûÊî∂ÔºõÂà§ÂÆöÂõûÊî∂Ôºå ÊâãÂä®GC, ÂÜçÊ¨°Âà§ÂÆöÂõûÊî∂ÔºåÈááÁî®ÂèåÈáçÂà§ÂÆöÊù•Á°Æ‰øùÂΩìÂâçÂºïÁî®ÊòØÂê¶Ë¢´ÂõûÊî∂ÁöÑÁä∂ÊÄÅÊ≠£Á°ÆÊÄßÔºõÂ¶ÇÊûú‰∏§Ê¨°ÈÉΩÊú™ÂõûÊî∂ÔºåÂàôÁ°ÆÂÆö‰∏∫Ê≥ÑÊºèÂØπË±°„ÄÇ</p>
<p><code>LeakCanaryÁöÑÈóÆÈ¢ò</code>ÔºöLeakCanary‰πüÊúâ‰∏ÄÂÆöÁöÑ‰∏çÁ°ÆÂÆöÊÄßÔºå‰∏ÄËà¨Âêå‰∏Ä‰∏™Âú∞ÊñπÂèçÂ§çÊ≥ÑÊºè5Ê¨°ÔºåÁÆóÊòØ‰∏Ä‰∏™Ê≥ÑÊºèÔºåÂêåÊó∂‰∏çÂª∫ËÆÆÁî®Âú®Á∫ø‰∏äÁéØÂ¢É„ÄÇ</p>
<p>ËØ¶ÁªÜÊü•Áúã <a href="https://github.com/square/leakcanary" target="_blank" rel="noopener">Github</a></p>
<h3 id="Á∫ø‰∏äÁõëÊéß"><a href="#Á∫ø‰∏äÁõëÊéß" class="headerlink" title="Á∫ø‰∏äÁõëÊéß"></a>Á∫ø‰∏äÁõëÊéß</h3><p>Á∫ø‰∏äÁöÑÂÜÖÂ≠òÁõëÊéß‰∏ÄËà¨ÈÉΩÊòØ‰∏Ä‰∫õÂ§ßÂÖ¨Âè∏Âú®ÂÅöÔºå‰æãÂ¶ÇÁæéÂõ¢ÁöÑ<a href="https://static001.geekbang.org/con/19/pdf/593bc30c21689.pdf" target="_blank" rel="noopener">Probe</a>ËøòÊúâÂæÆ‰ø°ÊúÄËøëÂºÄÊ∫êÁöÑ<a href="https://mp.weixin.qq.com/s/muX_RgK3cXiMd4j2B0L_lA" target="_blank" rel="noopener">Matrix</a>Ôºå‰∏™‰∫∫ËßâÂæóËøô‰∏™ÂèØ‰ª•Âéª‰∫ÜËß£‰∏ãÔºåÂ§ßÂÖ¨Âè∏Áî®Êà∑Êï∞Â§öÊó∂‰ºöÁî®Âà∞ÔºåÂ∞èÂÖ¨Âè∏AppÊé•ÂÖ•ÂøÖË¶ÅÊÄß‰∏çÊòØÂæàÂ§ßÔºå‰∏ÄËà¨Êù•ËØ¥Êää‰∏äÈù¢ÁöÑ‰ªãÁªçÁöÑÈÉ®ÂàÜÂÅöÂ•Ω‰∫ÜÂ∞±Ë∂≥Â§ü‰∫Ü„ÄÇ</p>

      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ÊäÄÊúØ/" rel="tag"># ÊäÄÊúØ</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/31/2018Âπ¥ÁªàÊÄªÁªì/" rel="next" title="2018Âπ¥ÁªàÊÄªÁªì">
                <i class="fa fa-chevron-left"></i> 2018Âπ¥ÁªàÊÄªÁªì
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/03/ÊàëÊúâ20Âº†ÁÖßÁâáÊÉ≥Âíå‰Ω†ÂàÜ‰∫´/" rel="prev" title="ÊàëÊúâ20Âº†ÁÖßÁâáÊÉ≥Âíå‰Ω†ÂàÜ‰∫´">
                ÊàëÊúâ20Âº†ÁÖßÁâáÊÉ≥Âíå‰Ω†ÂàÜ‰∫´ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://img.carlwe.com/blog_head.png" alt="CarlWe">
            
              <p class="site-author-name" itemprop="name">CarlWe</p>
              <p class="site-description motion-element" itemprop="description">Think Different</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">Êó•Âøó</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">Ê†áÁ≠æ</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/love-ai" title="GitHub &rarr; https://github.com/love-ai" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/144255366/home" title="ÂæÆÂçö &rarr; https://weibo.com/144255366/home" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>ÂæÆÂçö</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                ÂèãÊÉÖÈìæÊé•
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.kyleduo.com" title="http://blog.kyleduo.com" rel="noopener" target="_blank">kyleduo</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://zijian.site" title="http://zijian.site" rel="noopener" target="_blank">zijian</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂"><span class="nav-number">1.</span> <span class="nav-text">‰∏Ä„ÄÅAndroidÂÜÖÂ≠òÂàÜÈÖç‰∏éÂõûÊî∂Êú∫Âà∂</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-Framework"><span class="nav-number">1.1.</span> <span class="nav-text">Application Framework</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dalvik-Art-ËôöÊãüÊú∫"><span class="nav-number">1.2.</span> <span class="nav-text">Dalvik/Art ËôöÊãüÊú∫</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Android-Dalvik-Heap"><span class="nav-number">1.2.1.</span> <span class="nav-text">Android Dalvik Heap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè"><span class="nav-number">1.2.2.</span> <span class="nav-text">DalvikËôöÊãüÊú∫ÊâßË°åÊ®°Âºè</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ"><span class="nav-number">1.2.3.</span> <span class="nav-text">ARTËôöÊãüÊú∫ÁöÑ‰ºòÂåñ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LinuxÂÜÖÊ†∏"><span class="nav-number">1.3.</span> <span class="nav-text">LinuxÂÜÖÊ†∏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü"><span class="nav-number">1.4.</span> <span class="nav-text">ÂÜÖÂ≠ò‰∏ç‰ºòÂåñ‰ºöÂØºËá¥Âì™‰∫õÈóÆÈ¢òÔºü</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï"><span class="nav-number">2.</span> <span class="nav-text">‰∫å„ÄÅAndroidÂ∏∏Áî®ÁöÑÂÜÖÂ≠ò‰ºòÂåñÊñπÊ≥ï</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò"><span class="nav-number">2.1.</span> <span class="nav-text">Èôç‰ΩéËøêË°åÊó∂ÂÜÖÂ≠ò</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#‰ª£Á†Å‰ºòÂåñ"><span class="nav-number">2.2.</span> <span class="nav-text">‰ª£Á†Å‰ºòÂåñ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ"><span class="nav-number">2.3.</span> <span class="nav-text">ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü"><span class="nav-number">2.4.</span> <span class="nav-text">ÂÅöÂ•Ω‰∏äÈù¢ËØ¥ÁöÑ1„ÄÅ2„ÄÅ3Â∞±Â§ü‰∫ÜÂêóÔºü</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß"><span class="nav-number">3.</span> <span class="nav-text">‰∏â„ÄÅAndroidÂÜÖÂ≠òÂàÜÊûê‰∏éÁõëÊéß</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Êü•ÁúãGCÊó•Âøó"><span class="nav-number">3.1.</span> <span class="nav-text">Êü•ÁúãGCÊó•Âøó</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GCÁöÑÁ±ªÂûãÔºö"><span class="nav-number">3.1.1.</span> <span class="nav-text">GCÁöÑÁ±ªÂûãÔºö</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó"><span class="nav-number">3.1.2.</span> <span class="nav-text">Êü•ÁúãÂûÉÂúæÂõûÊî∂Êó•Âøó</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ"><span class="nav-number">3.2.</span> <span class="nav-text">Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò"><span class="nav-number">3.2.2.</span> <span class="nav-text">‰ΩøÁî®ProfilerÂàÜÊûêÂÜÖÂ≠ò</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè"><span class="nav-number">3.3.</span> <span class="nav-text">‰ΩøÁî®LeakCanaryÁõëÊéßÂÜÖÂ≠òÊ≥ÑÊºè</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Á∫ø‰∏äÁõëÊéß"><span class="nav-number">3.4.</span> <span class="nav-text">Á∫ø‰∏äÁõëÊéß</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 ‚Äì <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CarlWe</span>

  

  
</div>


  <div class="powered-by">Áî± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">‰∏ªÈ¢ò ‚Äì <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a></div>


<div class="BbeiAn-info">
‰∫¨ICPÂ§á 
<a target="_blank" href="http://beian.miit.gov.cn">18063442Âè∑</a>

</div>



        
<div class="busuanzi-count">
  <script async src="https://img.carlwe.com/busuanzi.pure.mini.js"></script>

  

  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="//img.carlwe.com/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.6.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.6.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.6.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  








  <script src="https://img.carlwe.com/modify.valine.min.js"></script>
  
  
    
  
  <script src="https://img.carlwe.com/modify.valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'v4tMSyKtnkNXshopxHKzSGBu-gzGzoHsz',
        appKey: 'b0kYAp9zaADOzcuVAbiw4SeT',
        placeholder: 'ÂèëË°®ËØÑËÆ∫...',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: true
    });
  </script>



  





  

  

  

  

  
  

  
  

  


  
  

  

  

  

  

  

  

</body>
</html>
